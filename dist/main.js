(()=>{"use strict";const t=document.getElementById("process"),e=document.getElementById("city"),n=document.getElementById("country"),o=document.getElementById("weather"),c=document.getElementById("temp"),i=document.getElementById("feelLike"),l=document.getElementById("moreInfo1"),r=document.getElementById("moreInfo2"),a=document.getElementById("latLon"),s=document.getElementById("togBtn");function u(t,e){c.textContent=d(t.main.temp,e),i.textContent=`Feel like: ${d(t.main.feels_like,e)}`}function d(t,e){let n;return"c"===e?(n=Math.round(10*t)/10,`${n}°C`):(n=Math.round(10*(1.8*t+32))/10,`${n}°F`)}const m="071ccef383eb80fc1abfd8e75526cb0d",g=document.getElementById("process");let y=[];async function p(t){y=[],g.textContent="--- LOADING ---",g.style.visibility="visible";const e=`https://api.openweathermap.org/geo/1.0/direct?q=${t}&limit=5&appid=${m}`;try{const t=await fetch(e,{mode:"cors"});y=await t.json(),function(t){0===t.length?(console.log("Location not found."),g.textContent="Location not found."):(console.log(t),console.log(`Places: ${t[0].name},${t[0].country}`),console.log(`Lat : ${t[0].lat}. Lon: ${t[0].lon} `),h(t[0].lat,t[0].lon))}(y)}catch(t){console.log("Geocoding Api Error"+t),g.textContent="Geocoding Api Error"}}async function h(c,i){const d=`https://api.openweathermap.org/data/2.5/weather?lat=${c}&lon=${i}&appid=${m}&units=metric`;let p;try{const c=await fetch(d,{mode:"cors"});p=await c.json(),function(c,i){function d(){!1===s.checked?u(c,"c"):u(c,"f")}t.style.visibility="hidden",console.log(c),i.length>0?(e.textContent=i[0].name,n.textContent=i[0].country):(e.textContent=c.name,n.textContent=c.sys.country),o.src=`https://openweathermap.org/img/wn/${c.weather[0].icon}@2x.png`,d(),s.onchange=d,l.textContent=`${c.weather[0].main},${c.weather[0].description}`,r.textContent=`Humidity: ${c.main.humidity}% | Pressure: ${c.main.pressure}mb`,a.textContent=`Lat: ${c.coord.lat} | Lon: ${c.coord.lon}`}(p,y)}catch(t){console.log("Current Weather Api Error"+t),g.textContent="Current Weather Api Error"}}function f(){navigator.geolocation.getCurrentPosition(C,E,$)}let $={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};function C(t){y=[];let e=t.coords;g.textContent="--- LOADING ---",g.style.visibility="visible",console.log("Your current position is:"),console.log(`Latitude : ${e.latitude}`),console.log(`Longitude: ${e.longitude}`),console.log(`More or less ${e.accuracy} meters.`),h(e.latitude,e.longitude)}function E(t){console.warn(`ERROR(${t.code}): ${t.message}`)}!function(){const t=document.querySelector("form"),e=document.querySelector("input");t.onsubmit=function(t){p(e.value),e.value="",t.preventDefault()},document.getElementById("gps").addEventListener("click",f),p("ho chi minh")}()})();