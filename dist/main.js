(()=>{"use strict";const t=document.getElementById("process"),e=document.getElementById("city"),n=document.getElementById("country"),o=document.getElementById("weather"),c=document.getElementById("temp"),i=document.getElementById("moreInfo1"),l=document.getElementById("moreInfo2"),r=document.getElementById("latLon");function a(t,e){let n;if("c"===e)return n=Math.round(10*t)/10,`${n}Â°C`}const s="071ccef383eb80fc1abfd8e75526cb0d",u=document.getElementById("process");let m=[];async function d(t){m=[],u.textContent="--- LOADING ---",u.style.visibility="visible";const e=`http://api.openweathermap.org/geo/1.0/direct?q=${t}&limit=5&appid=${s}`;try{const t=await fetch(e,{mode:"cors"});m=await t.json(),function(t){0===t.length?(console.log("Location not found."),u.textContent="Location not found."):(console.log(t),console.log(`Places: ${t[0].name},${t[0].country}`),console.log(`Lat : ${t[0].lat}. Lon: ${t[0].lon} `),g(t[0].lat,t[0].lon))}(m)}catch(t){console.log("Geocoding Api Error"+t),u.textContent="Geocoding Api Error"}}async function g(d,g){const y=`https://api.openweathermap.org/data/2.5/weather?lat=${d}&lon=${g}&appid=${s}&units=metric`;let p;try{const s=await fetch(y,{mode:"cors"});p=await s.json(),function(s,u){t.style.visibility="hidden",console.log(s),u.length>0?(e.textContent=u[0].name,n.textContent=u[0].country):(e.textContent=s.name,n.textContent=s.sys.country),o.src=`http://openweathermap.org/img/wn/${s.weather[0].icon}@2x.png`,function(t,e){c.textContent=a(t.main.temp,"c"),i.textContent=`${t.weather[0].main},${t.weather[0].description} | Feel like: ${a(t.main.feels_like,"c")}`}(s),l.textContent=`Humidity: ${s.main.humidity}% | Pressure: ${s.main.pressure}mb`,r.textContent=`Lat: ${s.coord.lat} | Lon: ${s.coord.lon}`}(p,m)}catch(t){console.log("Current Weather Api Error"+t),u.textContent="Current Weather Api Error"}}function y(){navigator.geolocation.getCurrentPosition(h,f,p)}let p={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};function h(t){m=[];let e=t.coords;u.textContent="--- LOADING ---",u.style.visibility="visible",console.log("Your current position is:"),console.log(`Latitude : ${e.latitude}`),console.log(`Longitude: ${e.longitude}`),console.log(`More or less ${e.accuracy} meters.`),g(e.latitude,e.longitude)}function f(t){console.warn(`ERROR(${t.code}): ${t.message}`)}!function(){const t=document.querySelector("form"),e=document.querySelector("input");t.onsubmit=function(t){d(e.value),e.value="",t.preventDefault()},document.getElementById("gps").addEventListener("click",y),d("ho chi minh")}()})();